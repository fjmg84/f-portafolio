---
import {
  IconArrowRight,
  IconGitHub,
  StreamlineGmail,
  FaLinkedin,
} from "../components/Icons";
import Layout from "../layouts/Layout.astro";

import { works, skills, jobs, contacts } from "../data/data.json";
import Tag from "../components/Tag.astro";
import Button from "../components/Button.astro";
import Threads from "../components/Threads.tsx";

const IconMapper = {
  gmail: StreamlineGmail,
  github: IconGitHub,
  linkedin: FaLinkedin,
};
---

<Layout title="fjmg84">
  <main class="flex flex-col py-20 relative w-full">
    <section
      class="flex flex-col gap-5 pt-20 justify-center items-center w-full"
    >
      <article
        class="flex flex-col-reverse items-center md:flex-row-reverse gap-10"
      >
        <div class="flex flex-col gap-5">
          <h1 class="text-6xl font-extrabold">Hi, I'm Fidel Miranda</h1>
          <span class="text-purple-400 text-5xl"> frontend developer</span>
          <div class="flex gap-10 items-center flex-wrap">
            <Button
              target="_blank"
              href="https://drive.google.com/file/d/13o8QZIxi7LPndEOLxz3-kCztK-0bdd57/view?usp=sharing"
              variant
              rel="noopener noreferrer"
              >Download CV in pdf
              <div
                class="w-[12px] h-[12px] border-purple-400 border-2 rounded-full"
              >
              </div>
            </Button>
            <ul class="flex gap-6">
              {
                contacts.map((contact) => {
                  const icon = contact.image as keyof typeof IconMapper;
                  const Component = IconMapper[icon];
                  return (
                    <li>
                      <a
                        href={contact.url}
                        target="_blank"
                        aria-label={contact.label}
                      >
                        <div class="hover:bg-purple-400 shadow-2xl hover:shadow-violet-400 bg-purple-950 p-3 rounded-full transition-colors">
                          <Component width={20} height={20} />
                        </div>
                      </a>
                    </li>
                  );
                })
              }
            </ul>
          </div>
        </div>

        <picture class="w-[200px] h-[200px] flex-none relative">
          <img
            src="/logo.png"
            alt="logo"
            class="w-full h-full z-20 absolute"
            fetchpriority="high"
            height="500"
            width="auto"
            loading="lazy"
          />
          <img
            src="/logo.png"
            alt="logo"
            class="w-full h-full absolute blur-xl top-0 z-10"
            fetchpriority="high"
            height="500"
            width="auto"
            loading="lazy"
          />
        </picture>
      </article>
    </section>

    <div
      style={{
        width: "100%",
        height: "500px",
        position: "relative",
      }}
    >
      <Threads
        client:load
        amplitude={2}
        distance={0}
        enableMouseInteraction={true}
      />
    </div>

    <div class="flex">
      <div class="flex gap-24 flex-col justify-center items-center">
        <section class="flex flex-col gap-5 md:w-[50%]">
          <h2 class="text-6xl font-extrabold">About Me</h2>
          <p class="leading-snug text-2xl">
            Passionate about web design and development, committed to offering
            innovative and effective solutions for each project.
          </p>
        </section>

        <section class="flex flex-col gap-5 md:w-[50%]">
          <h2 class="text-6xl font-extrabold">Work Experience</h2>
          <ul class="flex flex-col gap-10">
            {
              works.map((work) => {
                return (
                  <li class="flex flex-col gap-2">
                    <p class="font-extrabold text-xl text-purple-400">
                      {work.name}
                    </p>

                    <p class="font-extralight text-lg text-purple-300">
                      {work.position}
                    </p>

                    <div class="h-[1px] w-full bg-[#333]" />

                    <p class="font-light">{work.description}</p>
                  </li>
                );
              })
            }
          </ul>
        </section>

        <section class="flex flex-col gap-5 md:w-[50%]">
          <h2 class="text-6xl font-extrabold">Skills</h2>

          <ul class="flex flex-wrap gap-5 justify-start items-baseline">
            {
              skills.map((skill) => {
                return (
                  <li class="text-white">
                    <Tag
                      name={skill.name}
                      bgColor={skill.bgColor}
                      color={skill.color}
                    />
                  </li>
                );
              })
            }
          </ul>
        </section>

        <section class="flex flex-col gap-5 md:w-[50%]">
          <h2 class="text-6xl font-extrabold">Some Projects</h2>
          <ul class="flex flex-col gap-20">
            {
              jobs.map((job) => {
                return (
                  <li class="flex flex-col gap-10">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-5">
                      <div class="flex w-full h-[400px] rounded-lg overflow-hidden">
                        {job.images.map((image) => {
                          return (
                            <img
                              src={image}
                              alt={image}
                              height="500"
                              width="auto"
                              loading="lazy"
                              class="w-0 flex-grow object-cover opacity-80 transition-all duration-300 hover:opacity-100 hover:cursor-crosshair hover:w-96"
                            />
                          );
                        })}
                      </div>

                      <div class="flex flex-col justify-between gap-5">
                        <div class="flex flex-col gap-5">
                          <p>{job.description}</p>

                          <div class="flex flex-wrap gap-2">
                            {job.tools.map((tag) => {
                              const skill = skills.find((s) => s.id === tag);
                              return (
                                <Tag
                                  name={skill?.name || tag}
                                  bgColor={skill?.bgColor}
                                  color={skill?.color}
                                />
                              );
                            })}
                          </div>
                        </div>
                        <div class="flex flex-wrap gap-5">
                          {job.github && (
                            <Button
                              href={job.github}
                              target="_blank"
                              rel="noopener noreferrer"
                            >
                              github
                              <IconGitHub />
                            </Button>
                          )}
                          {job.site && (
                            <Button
                              href={job.site}
                              target="_blank"
                              rel="noopener noreferrer"
                              variant
                            >
                              {job.name} <IconArrowRight />
                            </Button>
                          )}
                        </div>
                      </div>
                    </div>
                  </li>
                );
              })
            }
          </ul>
        </section>
      </div>
    </div>
  </main>

  <style>
    .text-gradient {
      background-image: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-size: 400%;
      background-position: 0%;
    }
  </style>
</Layout>
